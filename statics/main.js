angular.module("Summaritizer",["ngRoute","creater","updater","viewer","missing"]);angular.module("Summaritizer").config(["$routeProvider",function($routeProvider){$routeProvider.when("/",{template:"<home></home>",title:"Home"}).when("/missing",{template:"<missing></missing>",title:"Not Found"}).when("/view/:id",{template:"<viewer></viewer>",title:"View"}).when("/update/:id",{template:"<update></update>",title:"Update"}).otherwise("/")}]);angular.module("Summaritizer").config(["$locationProvider",function($locationProvider){$locationProvider.html5Mode(false)}]);angular.module("Summaritizer").run(["$rootScope","$route",function($rootScope,$route){$rootScope.$on("$routeChangeSuccess",(function(currentRoute,previousRoute){$rootScope.title=$route.current.title}))}]);angular.module("contentForm",["ngRoute"]);angular.module("contentForm").component("createForm",{templateUrl:"./app/templates/form.template.html",controller:["$rootScope","$element","$location","$window","$http","$httpParamSerializerJQLike","simpleMdE",function($rootScope,$element,$location,$window,$http,$httpParamSerializerJQLike,simpleMdE){simpleMdE.initEditor($element.find("textarea")[0]);this.author="";this.hours="";this.minutes="";this.email="";this.update=false;this.msg="";this.loading=false;if($rootScope.status!==undefined){this.status=$rootScope.status;$window.scrollTo(0,0)}else this.status={type:"",msg:""};this.anyFieldEmpty=function(){return this.author===""||this.hours===""||this.minutes===""||this.email===""};this.timeInvalid=function(){return this.hours===0&&this.minutes===0||this.hours===24&&this.minutes!==0};this.validateHrsMins=function(){if(this.hours===""&&this.minutes==="")return"input is-normal is-primary";return"input is-normal "+(this.timeInvalid()?"is-danger":"is-success")};this.validEmail=function(valid){if(this.email==="")return"input is-primary";if(valid)return"input is-success";else return"input is-danger"};this.saveContent=function(){if(simpleMdE.getValue().length===0){this.msg="No content to save";return}this.msg="";this.loading=true;let data={};data.author=this.author;data.hours=this.hours;data.minutes=this.minutes;data.email=this.email;this.content=data.content=simpleMdE.getValue();let postReq={method:"POST",url:"/api/create",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$httpParamSerializerJQLike(data)};let self=this;$http(postReq).then((function(response){$rootScope.author=self.author;$rootScope.content=self.content;$location.path(`/view/${response.data.id}`)})).catch((function(response){self.status.type="danger";self.status.msg="Couldn't connect to the server";$window.scrollTo(0,0);self.loading=false}))}}]});angular.module("contentForm").service("simpleMdE",(function(){var simplemde;this.initEditor=function(element){simplemde=new SimpleMDE({element:element,spellChecker:true,hideIcons:["guide"],renderingConfig:{singleLineBreaks:false,codeSyntaxHighlighting:true}})};this.getValue=function(){return simplemde.value()}}));angular.module("creater",["contentForm","appFooter"]);angular.module("creater").component("homeIntro",{templateUrl:"./app/templates/intro.template.html",controller:["particleJS",function(particleJS){particleJS.startParticleMotion()}]});angular.module("creater").component("home",{template:`\n        <home-intro></home-intro>\n        <create-form></create-form>\n        <app-footer></app-footer>`});angular.module("creater").service("particleJS",(function(){this.startParticleMotion=function(){particlesJS.load("particles-js","./statics/particles.conf.json",(function(){console.log("Particle.js config loaded")}))}}));angular.module("appFooter",[]).component("appFooter",{templateUrl:"./app/templates/footer.template.html"});angular.module("loader",[]).component("loader",{template:`<div \n\t\t\t\tclass="loader-wrapper" \n\t\t\t\tng-show="$ctrl.loading">\n\t\t\t\t\t<div class="loader is-loading" \n\t\t\t\t\t ng-style="$ctrl.loaderStyle"></div>\n\t\t\t   </div>`,bindings:{loading:"<",loaderStyle:"<"},controller:function(){let ctrl=this;ctrl.$onInit=function(){ctrl.loaderStyle={height:"10rem",width:"10rem",border:"30px double #11ddaa","border-right-color":"transparent","border-left-color":"transparent",animation:"spinAround .8s infinite linear"}}}});angular.module("missing",["appFooter"]);angular.module("missing").component("missing",{template:`\n\t\t<notfound></notfound>\n\t\t<app-footer></app-footer>`});angular.module("missing").component("notfound",{templateUrl:"./app/templates/missing.template.html",controller:["particleJS",function(particleJS){particleJS.startParticleMotion()}]});angular.module("navbar",["ngRoute"]).component("navbar",{templateUrl:"./app/templates/navbar.template.html",controller:["$location","$document","$routeParams",function($location,$document,$routeParams){this.goToRoute=function(nextRoute){if($location.path().includes(nextRoute))return;$location.path(nextRoute+"/"+$routeParams.id)};this.toggleNavMenu=function(){angular.element($document[0].querySelectorAll(".navbar-menu")[0]).toggleClass("is-active");angular.element($document[0].querySelectorAll(".navbar-burger")[0]).toggleClass("is-active")}}]});angular.module("statusBox",[]).component("statusBox",{template:`\n\t\t\t<article \n\t\t\t\tclass="message" \n\t\t\t\tng-class=" 'is-' + $ctrl.status.type " \n\t\t\t\tng-hide=" $ctrl.status.msg === '' "\n\t\t\t\tng-click=" $ctrl.reset() ">\n\t\t\t\t<div\n\t\t\t\t\tclass="message-body" \n\t\t\t\t\tng-bind="$ctrl.status.msg">\n\t\t\t\t</div>\n\t\t\t</article>`,controller:function(){this.reset=function(){this.status.type="";this.status.msg=""}},bindings:{status:"<"}});angular.module("updater",["ngRoute","navbar","loader","statusBox","appFooter"]);angular.module("updater").component("update",{template:`\n\t\t<navbar></navbar>\n\t\t<update-form></update-form>\n\t\t<app-footer></app-footer>`});angular.module("updater").component("updateForm",{templateUrl:"./app/templates/form.template.html",controller:["$rootScope","$element","$location","$window","$http","$routeParams","$httpParamSerializerJQLike","simpleMdE",function($rootScope,$element,$location,$window,$http,$routeParams,$httpParamSerializerJQLike,simpleMdE){this.loading=true;simpleMdE.initEditor($element.find("textarea")[0]);this.author=$rootScope.author?$rootScope.author:"";this.content=$rootScope.content?$rootScope.content:"";this.update=true;this.msg="";this.key="";this.status={type:"",msg:""};$rootScope.status=undefined;if(this.author===""||this.content===""){let self=this;$http.get(`/api/read/${$routeParams.id}`).then((function(response){self.author=response.data.author;$rootScope.author=response.data.author;self.content=response.data.content;$rootScope.content=response.data.content;simpleMdE.setValue(response.data.content);self.loading=false})).catch((function(response){console.log(response);if(response.status===404)$location.path("/missing")}))}else{simpleMdE.setValue(this.content);this.loading=false}this.anyFieldEmpty=function(){return this.author===""||this.key===""};this.validEmail=function(valid){if(this.email==="")return"input is-primary";if(valid)return"input is-success";else return"input is-danger"};this.updateContent=function(){if(this.anyFieldEmpty())return;let content=simpleMdE.getValue();if(content.length===0){this.msg="No content to save";return}if(content===this.content){this.msg="No new content to update";return}this.loading=true;let data={};data.author=this.author;data.content=content;data.key=this.key;this.msg="";this.key="";let self=this;$http({method:"POST",url:`/api/update/${$routeParams.id}`,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$httpParamSerializerJQLike(data)}).then((function(response){if(response.status===201){$rootScope.content=self.content=content;$rootScope.author=self.author;self.status.type="success";self.status.msg=response.data}self.loading=false;$window.scrollTo(0,0)})).catch((function(response){if(response.status===403||response.status===406){self.status.type="danger";self.status.msg=response.data}self.loading=false;$window.scrollTo(0,0)}))};this.deleteContent=function(){if(this.key==="")return;this.loading=true;let data={};data.key=this.key;this.key="";let self=this;$http({method:"POST",url:`/api/delete/${$routeParams.id}`,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$httpParamSerializerJQLike(data)}).then((function(response){console.log(response);if(response.status===200){$rootScope.content="";$rootScope.author="";$rootScope.status={};$rootScope.status.type="success";$rootScope.status.msg=response.data}$location.path("/")})).catch((function(response){if(response.status===403||response.status===406){self.status.type="danger";self.status.msg=response.data}self.loading=false;$window.scrollTo(0,0)}))}}]});angular.module("updater").service("simpleMdE",(function(){var simplemde;this.initEditor=function(element){simplemde=new SimpleMDE({element:element,spellChecker:true,hideIcons:["guide"],renderingConfig:{singleLineBreaks:false,codeSyntaxHighlighting:true}})};this.getValue=function(){return simplemde.value()};this.setValue=function(mdContent){simplemde.value(mdContent)}}));angular.module("viewer",["ngRoute","ngSanitize","navbar","appFooter","loader"]);angular.module("viewer").component("viewer",{template:`\n\t\t<navbar></navbar>\n\t\t<content-viewer></content-viewer>\n\t\t<app-footer></app-footer>`});angular.module("viewer").component("contentViewer",{templateUrl:"./app/templates/viewer.template.html",controller:["$rootScope","$routeParams","$http","compiler",function($rootScope,$routeParams,$http,compiler){this.loading=true;this.author=$rootScope.author?$rootScope.author:"";this.content=$rootScope.content?$rootScope.content:"";if(this.author===""||this.content===""){let self=this;$http.get(`/api/read/${$routeParams.id}`).then((function(response){self.author=response.data.author;$rootScope.author=response.data.author;self.content=response.data.content;$rootScope.content=response.data.content;self.content=compiler.compileContent(self.content);self.loading=false})).catch((function(response){console.log(response);if(response.status===404)$location.path("/missing")}))}else{this.content=compiler.compileContent(this.content);this.loading=false}}]});angular.module("viewer").service("compiler",(function(){this.compileContent=function(content){const compiledContent=marked(content);setTimeout((function(){hljs.highlightAll()}),1e3);return compiledContent}}));
